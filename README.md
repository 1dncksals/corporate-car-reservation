# 법인 차량 예약 시스템

## 프로젝트 개요

법인 차량 예약 시스템은 기업 내 차량 예약을 효율적으로 관리하기 위한 웹 기반 시스템입니다. 사용자와 관리자의 역할을 분리하고, 예약 충돌을 방지하며, 기간별 정책을 설정할 수 있는 서비스를 기획하고 설계했습니다.
과거 재직중 경험을 바탕으로 구상하게 되었으며, 현실적인 문제를 해결해보고자 시도하였습니다.

**프로젝트 유형**: 개인 프로젝트 (기획/설계 중심)  
**핵심 영역**: API 명세 설계, UI 플로우 정의, 예약 충돌 처리 규칙 설계

## 문제 정의

기업 내 차량 예약 관리에서 다음과 같은 문제점들이 존재했습니다:

- **중복 예약 문제**: 동일 시간대에 같은 차량에 여러 예약이 발생하는 문제
- **예약 충돌 처리 미흡**: 예약 시간이 겹칠 때의 명확한 처리 규칙 부재
- **권한 관리 복잡성**: 일반 사용자와 관리자의 기능이 섞여 있어 시스템 복잡도 증가
- **의사결정 정보 부족**: UI에서 예약 가능 여부를 판단하기 위한 필수 정보가 누락됨
- **수동 관리의 한계**: 스프레드시트나 수기 예약 방식의 비효율성

## 솔루션 접근 방식

### 1. 데이터베이스 레벨 충돌 방지
PostgreSQL의 `EXCLUDE USING GIST` 제약을 활용하여 데이터베이스 레벨에서 중복 예약을 완전히 차단했습니다. 애플리케이션 로직만으로는 해결할 수 없는 동시성 문제를 데이터베이스 제약으로 해결했습니다.

### 2. 명확한 API 구조화
사용자와 관리자의 권한이 섞여 API가 복잡해지는 문제를 `/user/*`와 `/admin/*` 네임스페이스로 구조화하여 권한별 엔드포인트를 명확히 분리했습니다.

### 3. 의사결정 중심 UI 설계
예약 가능 여부를 판단하기 위해 필요한 정보(차량 현황, 예약 가능 시간대, 충돌 정보 등)를 우선적으로 설계하여 사용자가 빠르게 의사결정을 내릴 수 있도록 했습니다.

### 4. 정책 기반 충돌 처리
예약 시간 충돌 시 선점, 자동 연장, 관리자 승인 등 다양한 정책을 정의하여 상황에 맞는 유연한 처리가 가능하도록 설계했습니다.

## 기술 스택

- **Backend**: Spring Boot 3.2.0, Spring Data JPA, Spring Security
- **Frontend**: Vue 3 (Composition API), Vue Router 4
- **Database**: PostgreSQL (운영), H2 (개발)
- **API 문서화**: OpenAPI 3.0 / Swagger
- **ERD 설계**: DBML
- **빌드 도구**: Maven, Vite

## 주요 기능

### 예약 관리
- 차량 예약 생성, 수정, 취소
- 예약 연장 (최대 60분, 최대 2회)
- 예약 시간 충돌 자동 감지 및 대체 차량 제안
- 예약 감사 로그 추적

### 동승 시스템
- 다른 사용자 예약에 동승 요청
- 동승 요청 승인/거절 처리
- 좌석 수 기반 동승 관리

### 자동화 기능
- 반납 지연 시 30분씩 자동 연장
- 연장 시 다음 예약자에게 대체 차량 자동 제안
- 차량별 버퍼 시간 적용 (기본 20분)

### 권한 관리
- USER: 본인 예약 관리, 동승 요청/응답
- ADMIN: 전체 예약 관리, 사용자 관리, 대시보드 접근
- 권한별 API 접근 제어 및 UI 분기

## 시스템 요약

시스템은 백엔드(Spring Boot)와 프론트엔드(Vue 3)로 구성된 풀스택 구조입니다. 도메인 주도 설계(DDD) 패턴을 적용하여 예약, 차량, 사용자, 동승 등 각 도메인을 독립적으로 관리합니다. 데이터베이스 레벨에서 예약 충돌을 방지하고, 세션 기반 인증으로 권한을 관리합니다.

## 내가 맡은 역할 요약

### 전체 API 명세 작성
- OpenAPI 3.0 형식으로 REST API 전체 명세 작성
- 권한별 엔드포인트 분리 및 명세
- 요청/응답 스키마 정의 및 예시 작성

### 사용자/관리자 UI 플로우 설계
- 사용자와 관리자의 화면 분리 설계
- 예약 생성, 수정, 취소 등 주요 플로우 정의
- 의사결정에 필요한 정보 우선 설계

### 예약 충돌 처리 규칙 정의
- 선점, 자동 연장, 관리자 승인 등 정책 정의
- 충돌 시 대체 차량 제안 로직 설계
- 우선순위 알고리즘 설계 (긴급도, 직책 순위, 예약 기간)

## 트러블슈팅 요약

### 1. 예약 시간 충돌 규칙 미정
**문제**: 예약 시간이 겹칠 때 처리 방법이 명확하지 않음  
**해결**: 선점/자동연장/관리자 승인 등 정책을 정의하고 우선순위 규칙을 수립

### 2. 사용자/관리자 권한이 섞여 API 복잡
**문제**: 권한 체크 로직이 각 엔드포인트에 산재되어 복잡도 증가  
**해결**: `/user/*`와 `/admin/*` 네임스페이스로 구조화하여 권한별 엔드포인트 분리

### 3. UI에서 예약 판단 정보 누락
**문제**: 사용자가 예약 가능 여부를 판단하기 어려움  
**해결**: 차량 현황, 예약 가능 시간대, 충돌 정보 등 의사결정에 필요한 정보를 우선 설계

자세한 내용은 [트러블슈팅 문서](docs/troubleshooting.md)를 참고하세요.

## 결과 및 향후 개선 요약

### 결과
- 데이터베이스 레벨에서 중복 예약을 완전히 차단하는 시스템 구축
- 권한별로 명확히 분리된 API 구조 설계
- 사용자가 빠르게 의사결정을 내릴 수 있는 UI 플로우 설계
- 다양한 예약 시나리오를 고려한 충돌 처리 정책 수립

### 향후 개선 방향
- 실시간 알림 기능 구현 (WebSocket)
- 예약 패턴 분석을 통한 차량 배치 최적화
- 모바일 앱 연동을 위한 REST API 확장
- 멀티 테넌트 구조 확장

자세한 내용은 [개선 방향 문서](docs/improvement.md)를 참고하세요.
